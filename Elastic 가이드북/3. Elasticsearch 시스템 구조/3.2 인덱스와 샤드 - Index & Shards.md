# 3.2 인덱스와 샤드
Elasticsearch 에서는 단일 데이터 단위를 도큐먼트 라고 하며 이 도큐먼트를 모아놓은 집합을 인덱스 라고 한다. 인덱스는 기본적으로 샤드 라는 단위로 분리되고 각 노드에 분산되어 저장 된다.

### 프라이머리 샤드와 복제본
인덱스를 생성할 때 별도의 설정을 하지 않으면 7.0 버전부터는 디폴트로 1개의 샤드로 인덱스 구성. 클러스터에 노드를 추가하게 되면 샤드들이 각 노드들로 분산되고 디폴트로 1개의 복제본을 생성 한다. 처음 생성된 샤드를 프라이머리 샤드, 복제본을 리플리카 라고 한다. 프라이머리와 복제본은 각 다른 노드에 저장 되며 데이터의 유실을 막는다.

### 샤드 개수 설정
샤드의 개수는 인덱스를 생성 할 때 지정 하며, 샤드를 한 번 설정 하면 인덱스를 재색인 하지 않는 이상 바꿀 수 없다.

출처 : https://esbook.kimjmin.net/03-cluster/3.2-index-and-shards